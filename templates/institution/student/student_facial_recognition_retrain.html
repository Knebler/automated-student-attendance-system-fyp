{% extends "layouts/base.html" %}

{% block title %}Facial Recognition Retrain - AttendAI{% endblock %}

{% block content %}
<div class="facial-recognition-container">
    <div class="page-header mb-4">
        <h1 class="page-title">Facial Recognition Setup</h1>
        <div class="breadcrumb">
            <a href="{{ url_for('student.dashboard') }}">Dashboard</a> / 
            <a href="{{ url_for('student.profile') }}">Profile</a> / 
            <span>Facial Recognition</span>
        </div>
    </div>

    <div class="card-custom mb-4">
        <div class="card-header-custom">
            <div class="header-content">
                <i class="icon-camera"></i>
                <span>Train Your Face Recognition</span>
            </div>
        </div>
        <div class="card-body-custom">
            <div class="info-section mb-4">
                <h3 class="section-title">About Face Recognition Training</h3>
                <p class="info-text">
                    To enable automatic attendance marking, we need to train our system to recognize your face. 
                    This process will capture multiple images of your face from different angles to improve accuracy.
                </p>
                <div class="instructions">
                    <h4>Instructions:</h4>
                    <ul>
                        <li>Ensure you are in a well-lit area</li>
                        <li>Remove any accessories that cover your face (hats, sunglasses, etc.)</li>
                        <li>Look directly at the camera</li>
                        <li>Follow the on-screen prompts to capture multiple angles</li>
                        <li>The process will take approximately 2-3 minutes</li>
                    </ul>
                </div>
            </div>

            <div class="status-section mb-4">
                <h3 class="section-title">Current Status</h3>
                <div class="status-info">
                    <div class="status-item">
                        <span class="label">Face Recognition Status:</span>
                        <span class="value">
                            <span class="badge badge-warning">Not Trained</span>
                        </span>
                    </div>
                    <div class="status-item">
                        <span class="label">Last Updated:</span>
                        <span class="value">Never</span>
                    </div>
                </div>
            </div>

            <div class="camera-section">
                <div class="camera-preview">
                    <div class="camera-placeholder">
                        <i class="icon-camera-large"></i>
                        <p>Camera preview will appear here</p>
                    </div>
                </div>
            </div>

            <div class="action-section">
                <button class="btn-custom btn-primary btn-start-training">
                    <i class="icon-play"></i>
                    Start Training
                </button>
                <a href="{{ url_for('student.profile') }}" class="btn-custom btn-secondary">
                    <i class="icon-back"></i>
                    Back to Profile
                </a>
            </div>
        </div>
    </div>

    <div class="card-custom">
        <div class="card-header-custom">Privacy & Security</div>
        <div class="card-body-custom">
            <div class="privacy-info">
                <h4>Your Privacy Matters</h4>
                <p>
                    Your facial data is encrypted and stored securely. It is only used for attendance verification purposes 
                    and will never be shared with third parties. You can request deletion of your facial data at any time 
                    by contacting your institution administrator.
                </p>
            </div>
        </div>
    </div>
</div>

<style>
    .facial-recognition-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 2rem 1rem;
    }

    .page-header {
        border-bottom: 2px solid var(--border-color);
        padding-bottom: 1rem;
        margin-bottom: 2rem;
    }

    .page-title {
        font-size: 2rem;
        font-weight: bold;
        font-style: italic;
        color: var(--text-dark);
        margin-bottom: 0.5rem;
    }

    .breadcrumb {
        font-size: 0.9rem;
        color: var(--text-light);
    }

    .breadcrumb a {
        color: var(--primary-dark);
        text-decoration: none;
    }

    .breadcrumb a:hover {
        text-decoration: underline;
    }

    .breadcrumb span {
        color: var(--text-dark);
        font-weight: 500;
    }

    .header-content {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .icon-camera::before {
        content: "üì∑";
        font-size: 1.2rem;
    }

    .info-section {
        background-color: #f8f9fa;
        padding: 1.5rem;
        border-radius: 8px;
        border-left: 4px solid var(--primary-dark);
    }

    .section-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--text-dark);
        margin-bottom: 1rem;
    }

    .info-text {
        color: var(--text-dark);
        line-height: 1.6;
        margin-bottom: 1rem;
    }

    .instructions h4 {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
        color: var(--text-dark);
    }

    .instructions ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .instructions li {
        padding: 0.5rem 0;
        padding-left: 1.5rem;
        position: relative;
        color: var(--text-dark);
    }

    .instructions li::before {
        content: "‚úì";
        position: absolute;
        left: 0;
        color: #059669;
        font-weight: bold;
    }

    .status-section {
        padding: 1rem 0;
    }

    .status-info {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .status-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 1rem;
        background-color: #f8f9fa;
        border-radius: 6px;
    }

    .status-item .label {
        font-weight: 600;
        color: var(--text-dark);
    }

    .status-item .value {
        color: var(--text-dark);
    }

    .badge {
        padding: 0.35rem 0.75rem;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 600;
    }

    .badge-warning {
        background-color: #fef3c7;
        color: #92400e;
        border: 1px solid #fbbf24;
    }

    .badge-success {
        background-color: #d1fae5;
        color: #065f46;
        border: 1px solid #10b981;
    }

    .camera-section {
        margin: 2rem 0;
    }

    .camera-preview {
        width: 100%;
        aspect-ratio: 4/3;
        background-color: #1f2937;
        border-radius: 12px;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .camera-placeholder {
        text-align: center;
        color: #9ca3af;
    }

    .icon-camera-large::before {
        content: "üì∑";
        font-size: 4rem;
        display: block;
        margin-bottom: 1rem;
    }

    .camera-placeholder p {
        font-size: 1rem;
        margin: 0;
    }

    .action-section {
        display: flex;
        gap: 1rem;
        justify-content: center;
        padding-top: 2rem;
        border-top: 1px solid var(--border-color);
    }

    .btn-custom {
        padding: 0.875rem 2.5rem;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        border: none;
    }

    .btn-primary {
        background-color: var(--primary-dark);
        color: white;
    }

    .btn-primary:hover {
        background-color: #1e293b;
        transform: translateY(-1px);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .btn-secondary {
        background-color: #6b7280;
        color: white;
    }

    .btn-secondary:hover {
        background-color: #4b5563;
        color: white;
        text-decoration: none;
    }

    .btn-start-training {
        font-size: 1.1rem;
        padding: 1rem 3rem;
    }

    .icon-play::before {
        content: "‚ñ∂";
    }

    .icon-back::before {
        content: "‚Üê";
    }

    .privacy-info h4 {
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
        color: var(--text-dark);
    }

    .privacy-info p {
        color: var(--text-dark);
        line-height: 1.6;
        margin: 0;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .facial-recognition-container {
            padding: 1rem 0.5rem;
        }

        .page-title {
            font-size: 1.5rem;
        }

        .action-section {
            flex-direction: column;
        }

        .btn-custom {
            width: 100%;
            justify-content: center;
        }

        .status-item {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.5rem;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const startButton = document.querySelector('.btn-start-training');
        
        startButton.addEventListener('click', function() {
            // Placeholder for future functionality
            alert('Facial recognition training will be implemented soon!');
        });
    });
</script>
{% endblock %}
