
{% extends "layouts/base.html" %}

{% block title %}About Us - AttendAI{% endblock %}

{% block content %}
<style>
    /* Intro Section */
    .intro-section {
        text-align: center;
        margin-bottom: 3rem;
        padding: 2rem 0;
    }

    .intro-section h2 {
        font-size: 2rem;
        color: var(--text-dark);
        margin-bottom: 1rem;
        font-weight: bold;
    }

    .intro-section p {
        font-size: 1.1rem;
        color: var(--text-light);
        max-width: 800px;
        margin: 0 auto;
        line-height: 1.6;
    }

    /* Our Story Card */
    .story-card {
        border: 2px solid var(--border-color);
        border-radius: 12px;
        padding: 3rem 2rem;
        margin-bottom: 3rem;
        background-color: white;
        text-align: center;
        transition: transform 0.3s ease;
    }

    .story-card:hover {
        transform: translateY(-3px);
    }

    .story-card h2 {
        font-size: 1.75rem;
        color: var(--text-dark);
        margin-bottom: 1.5rem;
        font-weight: bold;
    }

    .story-card p {
        font-size: 1.1rem;
        color: var(--text-dark);
        line-height: 1.7;
        max-width: 900px;
        margin: 0 auto;
    }

    /* Team Cards */
    .team-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 2rem;
        margin-top: 2rem;
    }

    .team-card {
        border: 2px solid var(--border-color);
        border-radius: 12px;
        height: 420px;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        padding: 2rem;
        background-color: white;
        transition: transform 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .team-card:hover {
        transform: translateY(-5px);
    }

    .team-card-content {
        text-align: center;
        z-index: 2;
        position: relative;
    }

    .team-card h3 {
        font-size: 1.25rem;
        color: var(--text-dark);
        margin-bottom: 0.5rem;
        font-weight: bold;
    }

    .team-card .team-role {
        font-size: 0.95rem;
        color: var(--text-light);
        margin-bottom: 1rem;
        font-weight: bold;
    }

    .team-card .team-contributions {
        font-size: 0.85rem;
        color: var(--text-dark);
        line-height: 1.4;
        margin-bottom: 1.5rem;
        text-align: left;
        max-height: 150px;
        overflow-y: auto;
        padding-right: 0.5rem;
    }

    .team-card .team-contributions ul {
        padding-left: 1.2rem;
        margin: 0;
    }

    .team-card .team-contributions li {
        margin-bottom: 0.3rem;
        color: var(--text-dark);
    }

    .team-image-placeholder {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--primary-light);
        color: var(--text-light);
        font-size: 1rem;
        opacity: 0.3;
    }

    /* Section Title */
    .section-title {
        text-align: center;
        font-size: 2rem;
        color: var(--text-dark);
        margin: 3rem 0 2rem 0;
        font-weight: bold;
        position: relative;
    }

    .section-title::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 60px;
        height: 3px;
        background-color: var(--border-color);
    }

    /* Mission & Vision */
    .mission-vision-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 2rem;
        margin: 3rem 0;
    }

    .mission-card, .vision-card {
        border: 2px solid var(--border-color);
        border-radius: 12px;
        padding: 2rem;
        background-color: white;
        transition: transform 0.3s ease;
    }

    .mission-card:hover, .vision-card:hover {
        transform: translateY(-3px);
    }

    .mission-card h3, .vision-card h3 {
        font-size: 1.5rem;
        color: var(--text-dark);
        margin-bottom: 1rem;
        text-align: center;
        font-weight: bold;
    }

    .mission-card p, .vision-card p {
        font-size: 1rem;
        color: var(--text-dark);
        line-height: 1.6;
        text-align: center;
    }

    /* Values Cards */
    .value-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .value-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .value-emoji {
        position: relative;
        top: -15px;
        text-align: center;
        font-size: 2.25rem;
        margin-bottom: 0.75rem;
        line-height: 1;
        transition: transform 0.3s ease;
    }

    .value-card:hover .value-emoji {
        transform: scale(1.1);
    }

    @media (hover: none) {
        .value-card:hover {
            transform: none;
        }

        .value-card:hover .value-emoji {
            transform: none;
        }
    }

    /* Team Contributions Modal */
    .team-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 1rem;
    }

    .team-modal-content {
        background-color: white;
        border-radius: 16px;
        padding: 2.5rem;
        max-width: 600px;
        width: 100%;
        max-height: 80vh;
        overflow-y: auto;
        position: relative;
        border: 2px solid var(--border-color);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }

    .team-modal-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: none;
        border: none;
        font-size: 2rem;
        cursor: pointer;
        color: var(--text-light);
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.2s ease;
    }

    .team-modal-close:hover {
        background-color: var(--primary-light);
        color: var(--text-dark);
    }

    .team-modal-title {
        font-size: 2rem;
        color: var(--text-dark);
        text-align: center;
        margin-bottom: 1.5rem;
        font-weight: bold;
    }

    .team-modal-subtitle {
        font-size: 1.1rem;
        color: var(--text-light);
        text-align: center;
        margin-bottom: 2rem;
        font-weight: bold;
    }

    .team-modal-body {
        font-size: 1rem;
        color: var(--text-dark);
        line-height: 1.6;
    }

    .team-modal-body h4 {
        font-size: 1.2rem;
        color: var(--text-dark);
        margin: 1.5rem 0 0.75rem 0;
        font-weight: bold;
    }

    .team-modal-body ul {
        padding-left: 1.5rem;
        margin-bottom: 1rem;
    }

    .team-modal-body li {
        margin-bottom: 0.5rem;
        color: var(--text-dark);
    }

    /* Responsive */
    @media (max-width: 1024px) {
        .team-grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .mission-vision-grid {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
    }

    @media (max-width: 768px) {
        .team-grid {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        .team-card {
            height: 380px;
            padding: 1.5rem;
        }

        .story-card {
            padding: 2rem 1rem;
        }

        .intro-section h2 {
            font-size: 1.75rem;
        }

        .section-title {
            font-size: 1.75rem;
        }

        .team-modal-content {
            padding: 2rem 1.5rem;
        }
        
        .team-modal-title {
            font-size: 1.75rem;
        }
    }

    @media (max-width: 480px) {
        .team-card {
            height: 350px;
        }

        .intro-section p {
            font-size: 1rem;
        }

        .team-modal-content {
            padding: 1.5rem 1rem;
        }
        
        .team-modal-title {
            font-size: 1.5rem;
        }
    }
</style>

<!-- Intro Section -->
<section class="intro-section">
    <h2>{{ intro.title }}</h2>
    <p>{{ intro.description }}</p>
</section>

<!-- Our Story Card -->
<section class="story-card card-custom">
    <h2>{{ story.title }}</h2>
    <p>{{ story.content }}</p>
</section>

<!-- Mission & Vision -->
<h2 class="section-title">Our Mission & Vision</h2>
<div class="mission-vision-grid">
    <div class="mission-card card-custom">
        <h3>{{ mission.title }}</h3>
        <p>{{ mission.content }}</p>
    </div>
    <div class="vision-card card-custom">
        <h3>{{ vision.title }}</h3>
        <p>{{ vision.content }}</p>
    </div>
</div>

<!-- Team Section -->
<h2 class="section-title">Meet Our Team</h2>
<div class="team-grid">
    {% for member in team_members %}
    <div class="team-card card-custom">
        <div class="team-image-placeholder">
            {{ member.name }}
        </div>
        <div class="team-card-content">
            <h3>{{ member.name }}</h3>
            <p class="team-role">{{ member.role }}</p>
            <div class="team-contributions">
                <ul>
                    {% for contribution in member.contributions %}
                    <li>{{ contribution }}</li>
                    {% endfor %}
                </ul>
            </div>
            <button type="button" class="btn-primary show-team-details" data-member="{{ member.team_member_id }}">View Details</button>
        </div>
    </div>
    {% endfor %}
</div>

<!-- Team Member Details Modal -->
<div id="teamMemberModal" class="team-modal-overlay" style="display: none;">
    <div class="team-modal-content">
        <button class="team-modal-close">&times;</button>
        <h2 class="team-modal-title"></h2>
        <div class="team-modal-subtitle"></div>
        <div class="team-modal-body"></div>
    </div>
</div>

<!-- Values Section -->
<h2 class="section-title">Our Values</h2>
<div class="team-grid">
    {% for value in values %}
    <div class="team-card card-custom" style="justify-content: center;">
        <div class="team-card-content">
            <h3>{{ value.title }}</h3>
            <p>{{ value.description }}</p>
        </div>
    </div>
    {% endfor %}
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const teamModal = document.getElementById('teamMemberModal');
    const teamModalTitle = teamModal.querySelector('.team-modal-title');
    const teamModalSubtitle = teamModal.querySelector('.team-modal-subtitle');
    const teamModalBody = teamModal.querySelector('.team-modal-body');
    const closeButton = teamModal.querySelector('.team-modal-close');
    
    // Team member details data from backend
    const teamMemberDetails = {
        {% for member in team_members %}
        '{{ member.team_member_id }}': {
            name: {{ member.name|tojson|safe }},
            role: {{ member.role|tojson|safe }},
            description: {{ member.description|tojson|safe }},
            contributions: {{ member.contributions|tojson|safe }},
            skills: {{ member.skills|tojson|safe }}
        }{% if not loop.last %},{% endif %}
        {% endfor %}
    };

    // Open modal when View Details is clicked
    document.querySelectorAll('.show-team-details').forEach(button => {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            const memberId = this.dataset.member;
            
            if (teamMemberDetails[memberId]) {
                const member = teamMemberDetails[memberId];
                
                teamModalTitle.textContent = member.name;
                teamModalSubtitle.textContent = member.role;
                teamModalBody.innerHTML = `
                    <p><strong>${member.description}</strong></p>
                    
                    <h4>Key Contributions</h4>
                    <ul>
                        ${member.contributions.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                    
                    <h4>Skills & Expertise</h4>
                    <ul>
                        ${member.skills.map(skill => `<li>${skill}</li>`).join('')}
                    </ul>
                    
                    <h4>About</h4>
                    <p>${member.name} plays a crucial role in the development of AttendAI, contributing to both the technical implementation and documentation aspects of the project. Their work ensures that our attendance management system is both powerful and user-friendly.</p>
                `;
                
                teamModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        });
    });

    // Close modal functionality
    closeButton.addEventListener('click', function() {
        teamModal.style.display = 'none';
        document.body.style.overflow = 'auto';
    });

    // Close modal when clicking outside
    teamModal.addEventListener('click', function(e) {
        if (e.target === teamModal) {
            teamModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
    });

    // Close with Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && teamModal.style.display === 'flex') {
            teamModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
    });
});
</script>
{% endblock %}
