{% extends "layouts/base.html" %}

{% block title %}FAQ - AttendAI{% endblock %}

{% block content %}
<style>
    /* Page Header */
    .page-header {
        text-align: center;
        margin-bottom: 3rem;
        padding: 2rem 0;
    }

    .page-header h1 {
        font-size: 2.5rem;
        color: var(--text-dark);
        margin-bottom: 1rem;
        font-weight: bold;
        font-style: italic;
    }

    .page-header p {
        font-size: 1.1rem;
        color: var(--text-light);
        max-width: 800px;
        margin: 0 auto;
        line-height: 1.6;
    }

    /* Search Section */
    .search-section {
        display: flex;
        gap: 1rem;
        margin-bottom: 3rem;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }

    .search-input {
        flex: 1;
        padding: 0.75rem 1.5rem;
        border: 1px solid var(--border-soft);
        border-radius: 8px;
        font-size: 1rem;
        outline: none;
        font-family: 'Montserrat', sans-serif;
    }

    .search-input:focus {
        border-color: #1e293b;
    }

    .search-btn {
        flex-shrink: 0;
    }

    /* FAQ Categories */
    .category-tabs {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        justify-content: center;
    }

    .category-tab {
        cursor: pointer;
    }

    .category-tab.active {
        background-color: var(--primary-dark);
        color: white;
        border-color: var(--primary-dark);
    }

    /* FAQ Accordion */
    .faq-list {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        margin-bottom: 3rem;
    }

    .faq-item {
        border: 1px solid var(--border-soft);
        border-radius: 16px;
        overflow: hidden;
        background-color: white;
        transition: all 0.3s ease;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
    }

    .faq-item:hover {
        border-color: var(--border-soft);
    }

    .faq-question {
        background-color: white;
        color: var(--text-dark);
        padding: 1.25rem 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .faq-question:hover {
        background-color: var(--primary-light);
    }

    .faq-question-text {
        font-weight: 600;
        font-size: 1.1rem;
        flex: 1;
        margin-right: 1rem;
    }

    .faq-icon {
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1;
        color: var(--text-dark);
        transition: transform 0.3s ease;
        min-width: 24px;
        text-align: center;
    }

    .faq-item.active .faq-icon {
        transform: rotate(45deg);
    }

    .faq-answer {
        padding: 0;
        color: var(--text-dark);
        line-height: 1.7;
        max-height: 0;
        overflow: hidden;
        transition: all 0.3s ease;
    }

    .faq-item.active .faq-answer {
        padding: 1.5rem;
        max-height: 1000px;
    }

    .faq-answer p {
        margin-bottom: 1rem;
    }

    .faq-answer p:last-child {
        margin-bottom: 0;
    }

    /* FAQ Categories Sections */
    .category-section {
        display: none;
        animation: fadeIn 0.3s ease;
    }

    .category-section.active {
        display: block;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Contact Section */
    .contact-section {
        background-color: white;
        border: 1px solid var(--border-soft);
        border-radius: 16px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
        padding: 2rem 2.5rem;
        margin: 4rem 0;
        text-align: center;
    }

    .contact-section h3 {
        font-size: 2rem;
        color: var(--text-dark);
        margin-bottom: 0.5rem;
        font-weight: bold;
    }

    .contact-section > p {
        font-size: 0.95rem;
        color: var(--text-light);
        margin-bottom: 1.5rem;
        max-width: 560px;
        margin-left: auto;
        margin-right: auto;
        line-height: 1.5;
    }

    .contact-options {
        display: flex;
        gap: 1.25rem;
        justify-content: center;
        flex-wrap: wrap;
        align-items: stretch;
    }

    .contact-options .contact-btn {
        flex: 1 1 260px;
        min-width: 260px;
        max-width: 320px;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 1rem 2.5rem;
        border-radius: 50px;
        gap: 0.35rem;
        display: inline-flex;
    }

    .contact-options .contact-btn span:first-child {
        font-size: 0.75rem;
        font-weight: 600;
        color: var(--text-light);
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .contact-options .contact-btn span:last-child {
        font-size: 1rem;
        font-weight: bold;
        color: var(--text-dark);
    }

    .contact-options .contact-btn:hover span:first-child {
        color: rgba(255, 255, 255, 0.9);
    }

    .contact-options .contact-btn:hover span:last-child {
        color: white;
    }

    .contact-btn {
        padding: 0.75rem 1.5rem;
        background-color: white;
        border: 1px solid var(--border-soft);
        border-radius: 50px;
        text-decoration: none;
        color: var(--text-dark);
        font-weight: 500;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }

    .contact-btn:hover {
        background-color: var(--primary-dark);
        color: white;
        border-color: var(--primary-dark);
        text-decoration: none;
    }

    /* Quick Links */
    .quick-links {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1.5rem;
        margin: 3rem 0;
    }

    .quick-link-card {
        border: 1px solid var(--border-soft);
        border-radius: 16px;
        padding: 2rem 1.5rem;
        text-align: center;
        background-color: white;
        transition: all 0.3s ease;
        text-decoration: none;
        color: var(--text-dark);
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
    }

    .quick-link-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        text-decoration: none;
        color: var(--text-dark);
    }

    .quick-link-card:hover h4 {
        color: var(--text-dark);
    }

    .quick-link-card:hover p {
        color: var(--text-light);
    }

    .quick-link-card h4 {
        font-size: 1.25rem;
        margin-bottom: 0.5rem;
        font-weight: bold;
    }

    .quick-link-card p {
        font-size: 0.95rem;
        color: var(--text-light);
        margin-bottom: 0;
    }

    /* No Results Message */
    .no-results {
        text-align: center;
        padding: 3rem;
        color: var(--text-light);
        display: none;
    }

    /* Responsive */
    @media (max-width: 1024px) {
        .quick-links {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 768px) {
        .page-header h1 {
            font-size: 2rem;
        }

        .search-section {
            flex-direction: column;
            max-width: 100%;
        }

        .search-btn {
            width: 100%;
        }

        .category-tabs {
            gap: 0.5rem;
        }

        .faq-question {
            padding: 1rem 1.25rem;
        }

        .faq-question-text {
            font-size: 1rem;
        }

        .contact-section {
            padding: 2rem 1.5rem;
        }

        .contact-options {
            flex-direction: column;
            align-items: center;
        }

        .contact-options .contact-btn {
            max-width: 100%;
        }

        .quick-links {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 480px) {
        .page-header h1 {
            font-size: 1.75rem;
        }

        .contact-options .contact-btn {
            min-width: 0;
        }

        .faq-question-text {
            font-size: 0.95rem;
        }
    }
</style>

<!-- Page Header -->
<div class="page-header">
    <h1>Frequently Asked Questions</h1>
    <p>Find answers to common questions about AttendAI. Can't find what you're looking for? Contact our support team for personalized assistance.</p>
</div>

<!-- Search Section -->
<div class="search-section">
    <input type="text" class="search-input" id="faqSearch" placeholder="Search questions...">
    <button type="button" class="search-btn btn-primary" onclick="searchFAQs()">Search</button>
</div>

<!-- Category Tabs -->
<div class="category-tabs">
    <div class="category-tab btn-outline active" onclick="showCategory('general')">General</div>
    <div class="category-tab btn-outline" onclick="showCategory('features')">Features</div>
    <div class="category-tab btn-outline" onclick="showCategory('pricing')">Pricing & Plans</div>
    <div class="category-tab btn-outline" onclick="showCategory('technical')">Technical</div>
    <div class="category-tab btn-outline" onclick="showCategory('implementation')">Implementation</div>
</div>

<!-- General FAQs -->
<div class="category-section active" id="general-faqs">
    <div class="faq-list">
        {% for faq in faqs.general %}
        <div class="faq-item {% if loop.first %}active{% endif %}">
            <div class="faq-question" onclick="toggleFAQ(this)">
                <span class="faq-question-text">{{ faq.question }}</span>
                <span class="faq-icon">+</span>
            </div>
            <div class="faq-answer">
                {% for paragraph in faq.answer.split('\n\n') %}
                <p>{{ paragraph|safe }}</p>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Features FAQs -->
<div class="category-section" id="features-faqs">
    <div class="faq-list">
        {% for faq in faqs.features %}
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                <span class="faq-question-text">{{ faq.question }}</span>
                <span class="faq-icon">+</span>
            </div>
            <div class="faq-answer">
                {% for paragraph in faq.answer.split('\n\n') %}
                <p>{{ paragraph|safe }}</p>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Pricing FAQs -->
<div class="category-section" id="pricing-faqs">
    <div class="faq-list">
        {% for faq in faqs.pricing %}
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                <span class="faq-question-text">{{ faq.question }}</span>
                <span class="faq-icon">+</span>
            </div>
            <div class="faq-answer">
                {% for paragraph in faq.answer.split('\n\n') %}
                <p>{{ paragraph|safe }}</p>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Technical FAQs -->
<div class="category-section" id="technical-faqs">
    <div class="faq-list">
        {% for faq in faqs.technical %}
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                <span class="faq-question-text">{{ faq.question }}</span>
                <span class="faq-icon">+</span>
            </div>
            <div class="faq-answer">
                {% for paragraph in faq.answer.split('\n\n') %}
                <p>{{ paragraph|safe }}</p>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Implementation FAQs -->
<div class="category-section" id="implementation-faqs">
    <div class="faq-list">
        {% for faq in faqs.implementation %}
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                <span class="faq-question-text">{{ faq.question }}</span>
                <span class="faq-icon">+</span>
            </div>
            <div class="faq-answer">
                {% for paragraph in faq.answer.split('\n\n') %}
                <p>{{ paragraph|safe }}</p>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Quick Links -->
<div class="quick-links">
    <a href="{{ url_for('main.features') }}" class="quick-link-card">
        <h4>Explore Features</h4>
        <p>Learn about all the powerful features AttendAI offers</p>
    </a>
    <a href="{{ url_for('main.subscriptions') }}" class="quick-link-card">
        <h4>View Pricing Plans</h4>
        <p>Compare our affordable subscription options</p>
    </a>
    <a href="{{ url_for('main.testimonials') }}" class="quick-link-card">
        <h4>Read Success Stories</h4>
        <p>See how other institutions benefit from AttendAI</p>
    </a>
</div>

<!-- Contact Section -->
<div class="contact-section">
    <h3>Still Have Questions?</h3>
    <p>Our support team is here to help. Contact us through any of the channels below for personalized assistance.</p>
    <div class="contact-options">
        <a href="mailto:attend_ai@gmail.com" class="contact-btn">
            <span>Email</span>
            <span>attend_ai@gmail.com</span>
        </a>
        <a href="tel:+6512341234" class="contact-btn">
            <span>Phone</span>
            <span>+65 1234 1234</span>
        </a>
    </div>
</div>

<!-- No Results Message -->
<div class="no-results" id="noResults">
    <h3>No matching questions found</h3>
    <p>Try different keywords or contact our support team for assistance.</p>
</div>

<script>
    // FAQ Toggle Function
    function toggleFAQ(element) {
        const faqItem = element.parentElement;
        const icon = element.querySelector('.faq-icon');
        const isActive = faqItem.classList.contains('active');

        // Toggle current item
        if (isActive) {
            faqItem.classList.remove('active');
            icon.textContent = '+';
        } else {
            faqItem.classList.add('active');
            icon.textContent = '+';
        }
    }

    // Category Tab Function
    function showCategory(category) {
        // Update active tab
        document.querySelectorAll('.category-tab').forEach(tab => {
            tab.classList.remove('active');
        });
        event.target.classList.add('active');

        // Show selected category
        document.querySelectorAll('.category-section').forEach(section => {
            section.classList.remove('active');
        });
        document.getElementById(category + '-faqs').classList.add('active');

        // Reset search
        document.getElementById('faqSearch').value = '';
        document.getElementById('noResults').style.display = 'none';
    }

    // Search Function
    function searchFAQs() {
        const searchTerm = document.getElementById('faqSearch').value.toLowerCase().trim();
        const allFAQs = document.querySelectorAll('.faq-item');
        let foundResults = false;

        if (searchTerm === '') {
            // Reset to show all
            allFAQs.forEach(faq => {
                faq.style.display = '';
            });
            document.getElementById('noResults').style.display = 'none';
            return;
        }

        allFAQs.forEach(faq => {
            const question = faq.querySelector('.faq-question-text').textContent.toLowerCase();
            const answer = faq.querySelector('.faq-answer').textContent.toLowerCase();
            
            if (question.includes(searchTerm) || answer.includes(searchTerm)) {
                faq.style.display = '';
                foundResults = true;
                
                // Expand matching FAQ
                faq.classList.add('active');
                faq.querySelector('.faq-icon').textContent = '+';
            } else {
                faq.style.display = 'none';
            }
        });

        // Show no results message if needed
        document.getElementById('noResults').style.display = foundResults ? 'none' : 'block';
    }

    // Search on Enter key
    document.getElementById('faqSearch').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            searchFAQs();
        }
    });

    // Initialize first FAQ as open
    document.addEventListener('DOMContentLoaded', function() {
        const firstFAQ = document.querySelector('.faq-item');
        if (firstFAQ) {
            firstFAQ.classList.add('active');
            firstFAQ.querySelector('.faq-icon').textContent = '+';
        }
    });
</script>
{% endblock %}